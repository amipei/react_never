{"version":3,"sources":["containers/details/redux/actionTypes.ts","containers/details/redux/reducer.ts","common/hook.ts","baseUI/navbar/index.tsx","baseUI/dividers/index.tsx","baseUI/header/index.tsx","baseUI/icon_wrap/index.tsx","baseUI/load_icon/index.tsx","baseUI/img_wrap/index.tsx","baseUI/list/index.tsx","baseUI/list/ListItem.tsx","baseUI/tabs/TabContent.tsx","baseUI/tabs/TabNav.tsx","baseUI/tabs/Tabs.tsx","baseUI/tabs/TabPane.tsx","baseUI/tag/index.tsx","baseUI/express/index.tsx","baseUI/bottom_load/index.tsx","baseUI/details_list/index.tsx","containers/details/components/summary/index.tsx","containers/details/components/interest/index.tsx","containers/search/redux/actionTypes.ts","common/reduxHook.ts","api/service.ts","containers/details/redux/actions.ts","containers/details/index.ts","containers/details/view/Details.tsx","containers/details/view/hook.ts","containers/search/redux/reducer.ts","containers/new_book/redux/actionTypes.ts","containers/new_book/redux/reducer.ts","redux/reducers.ts","redux/configureStore.ts","containers/search/redux/actions.ts","containers/search/view/hook.ts","containers/search/components/search_history/SearchHistory.tsx","containers/search/components/search_bar/SearchBar.tsx","containers/search/components/search_list/SearchList.tsx","containers/search/components/search_match/SearchMatch.tsx","containers/search/view/Search.tsx","containers/new_book/redux/actions.ts","containers/new_book/view/hook.ts","containers/all/index.ts","containers/all/view/All.tsx","containers/new_book/index.ts","containers/new_book/view/NewBook.tsx","containers/home_bar/HomeBar.tsx","view/Home.tsx","view/Find.tsx","view/Shlef.tsx","App.tsx","index.tsx"],"names":["ActionTypes","Status","useScrollBar","useState","isInTop","setIsInTop","handleScroll","e","scrollY","window","pageYOffset","useEffect","addEventListener","removeEventListener","classNames","require","NavBar","props","leftContent","children","rightContent","leftOnClick","rootClassName","className","onClick","Dividers","Header","title","extra","other","IconWrap","icon","LoadIcon","style","ImgWrap","src","alt","imageStatus","setImageStatus","onLoad","onError","height","width","List","dataSource","renderItem","map","ListItem","metaData","TabContent","panels","TabNav","classPrefix","React","Children","child","path","Tab","tab","to","Tabs","TabPane","Component","component","render","routeProps","Tag","d","console","log","Express","data","item","i","BottomLoad","loadCallBack","useInView","ref","inView","flex","borderRadius","overflow","DetailsList","undefined","start","count","total","books","key","isbn13","images","small","subtitle","rating","average","author","pubdate","publisher","summary","array","delimitedText","text","reg","textArray","arr","exec","push","interest","state","status","LOADING","action","type","FETCH_STARTED","FETCH_SUCCESS","SUCCESS","result","FETCH_FAILURE","FAILURE","useSelector","useReduxSelector","apikey","getSearchApi","value","tag","field","valueStr","tagStr","fieldStr","startStr","countStr","getIsbnQueryApi","isbn","searchValueFetch","option","a","url","fetchJsonp","then","res","json","searchTagFetch","queryisbnFetch","getBoosInfo","dispatch","fetchStarted","fetchSuccess","catch","err","fetchFailure","error","Details","useDispatch","details","shallowEqual","setDetailsState","useDetailsState","match","params","marginLeft","history","goBack","image","author_intro","initialState","historySearch","Set","nowSearch","searchReducer","CHANGE_VALUE","CHANGE_HISTORY_SEARCH","CHANGE_NOW_SEARCH","CHANGE_NEW_BOOK","createBrowserHistory","rootReducer","combineReducers","router","connectRouter","search","newBook","newBookReducer","detailsReducer","preloadedState","debounce","changeValue","changeNowSearch","changeHistorySearch","fetchSearchResult","clickResultItem","addSearchLog","fetchMatchSearchResult","getState","newHistorySearch","copySet","add","writeTolocalStorage","JSON","stringify","localStorage","setItem","set","newSet","forEach","useSearchValue","onChange","length","input","useNowSearch","usePagingMatchSearch","newNowSearch","parse","temp","concat","addMatchSearch","useCLICKResult","clickResultAction","useHistorySearch","loading","getItem","delHistory","SearchHistory","size","getTags","SearchBar","inputEl","useRef","target","placeholder","node","current","focus","SearchList","SearchMatch","pagingSearch","Search","exact","fetchNewBookData","changeNewBook","usePagingNewBook","newNewBook","fetchPagingNewBookData","All","tempState","loadNewBookData","NewBook","useNewBook","HomeBar","toast","marginRight","Home","Find","display","justifyContent","alignItems","Shlef","App","from","IndexTab","FinedTab","ShelfTab","store","createStore","compose","applyMiddleware","routerMiddleware","ReduxThunk","ReactDOM","document","getElementById"],"mappings":"kkBAAYA,ECEAC,E,8FCsBGC,EAnBO,WAAO,IAAD,EACIC,oBAAS,GADb,mBACnBC,EADmB,KACVC,EADU,KAEpBC,EAAe,SAACC,GACpB,IAAMC,EAAUC,OAAOC,YAErBL,IADEG,EAAU,KAahB,OAPAG,oBAAU,WAGR,OAFAF,OAAOG,iBAAiB,SAAUN,GAAc,GAEzC,WACLG,OAAOI,oBAAoB,SAAUP,GAAc,MAGhD,CAACF,IClBJU,G,MAAaC,EAAQ,KAkCZC,EAzBuB,SAACC,GAAW,IAAD,EACxCC,EAAkDD,EAAlDC,YAAaC,EAAqCF,EAArCE,SAASC,EAA4BH,EAA5BG,aAAaC,EAAeJ,EAAfI,YADK,EAE7BnB,IAAXE,EAFwC,oBAKzCkB,EAAgBR,GAAU,6BADZ,WAEE,GADU,wBADZ,SACY,aAEDV,GAFC,IAIhC,OACE,yBAAKmB,UAAWD,GACd,yBAAKC,UAAS,UAPE,SAOF,UACTC,QAASH,GACXH,GAEH,yBAAKK,UAAS,UAXE,SAWF,aACXJ,GAEH,yBAAKI,UAAS,UAdE,SAcF,YACXH,KCzBMK,G,MAJE,kBACf,yBAAKF,UAAU,e,QCmBFG,G,MAdwB,SAACT,GAAW,IACzCU,EAA2BV,EAA3BU,MAAOC,EAAoBX,EAApBW,MAAUC,EADuB,YACbZ,EADa,mBAIhD,OACE,yBAAKM,UAFa,UAGhB,wBAAIA,UAAS,UAHG,SAGH,YAA4BI,GACzC,uCAAKJ,UAAS,UAJE,SAIF,YAA+BM,GACzCD,MCOKE,G,MAb2B,SAAC,GAAD,IAAEP,EAAF,EAAEA,UAAWQ,EAAb,EAAaA,KAASF,EAAtB,2CACxC,wCAAMN,UAAS,oBAAeA,IAAiBM,GAC5CE,KCKUC,G,MAX2B,SAAC,GAAa,IAAZC,EAAW,EAAXA,MAE1C,OACE,yBAAKV,UAFa,YAEWU,MAAOA,GAClC,yBAAKV,UAAS,UAHE,YAGF,aACZ,yBAAKA,UAAS,UAJA,YAIA,eCkBPW,G,MApByB,SAACjB,GAAW,IAC3CkB,EAAmBlB,EAAnBkB,IAAKC,EAAcnB,EAAdmB,IAAKH,EAAShB,EAATgB,MADgC,EAEX9B,mBAAS,WAFE,mBAE1CkC,EAF0C,KAE7BC,EAF6B,KAIjD,OACE,yBAAKf,UAFa,WAEWU,MAAOA,GAClC,yBAAKV,UAAS,UAHE,WAGF,SAAyBY,IAAKA,EAAKC,IAAKA,EACjDG,OAAQ,kBAAMD,EAAe,WAC7BE,QAAS,kBAAMF,EAAe,aAElB,YAAhBD,EACG,yBAAKd,UAAS,UARF,WAQE,WAA0B,kBAAC,EAAD,CAAUU,MAAO,CAACQ,OAAO,OAAOC,MAAM,WAC9E,QCHKC,G,MAZmB,SAAC1B,GAAW,IACrC2B,EAA0B3B,EAA1B2B,WAAYC,EAAc5B,EAAd4B,WAEnB,OACE,yBAAKtB,UAFa,QAGhB,4BACGqB,EAAWE,IAAID,OCeTE,EAnBuB,SAAC9B,GAAW,IACzCE,EAA+BF,EAA/BE,SAAU6B,EAAqB/B,EAArB+B,SAAUxB,EAAWP,EAAXO,QAK3B,OACE,wBAAIA,QALc,SAACjB,GACdiB,GACLA,EAAQwB,EAAUzC,KAIfY,ICHQ8B,G,MATmB,SAAChC,GAAW,IACrCiC,EAAUjC,EAAViC,OACP,OACE,yBAAK3B,UAAU,gBACZ2B,K,QCoBQC,EAxBe,SAAClC,GAAgB,IACrCmC,EAAwBnC,EAAxBmC,YAAaF,EAAWjC,EAAXiC,OAcrB,OACE,yBAAK3B,UAAS,UAAK6B,EAAL,UACZ,yBAAK7B,UAAS,UAAK6B,EAAL,UAbTC,IAAMC,SAASR,IAAII,EAAQ,SAACK,GACjC,GAAKA,EAAL,CACA,IAAIC,EAAOD,EAAMtC,MAAMuC,KACnBC,EAAMF,EAAMtC,MAAMyC,IACtB,OACE,kBAAC,IAAD,CAAMC,GAAIH,EAAMjC,UAAS,UAAK6B,EAAL,UACvB,kBAACK,EAAD,aCgCKG,EA/BmB,SAAC3C,GAAW,IAAD,EAKvCA,EAHFmC,mBAFyC,MAE3B,SAF2B,EAIzCjC,GACEF,EAFFM,UAEEN,EADFE,UAmBF,OACE,yBAAKI,UAAU,IAPb,kBAAC,EAAD,CACE6B,YAAaA,EACbF,OAAQ/B,IAVV,kBAAC,EAAD,CACEiC,YAAaA,EACbF,OAAQ/B,M,OCRD0C,EAXyB,SAAC5C,GAAW,IAC3CuC,EAA+BvC,EAA/BuC,KAAiBM,EAAc7C,EAAzB8C,UACb,OACE,kBAAC,IAAD,CAAOP,KAAMA,EAAMQ,OAAQ,SAAAC,GACzB,OACE,kBAACH,EAAD,UCQOI,G,MAZiB,SAACjD,GAAW,IAClCE,EAA+CF,EAA/CE,SADiC,EACcF,EAApCO,eADsB,MACZ,SAAC2C,KADW,EACCnB,EAAa/B,EAAb+B,SAG1C,OADAoB,QAAQC,IAAIrB,GAEV,0BAAMzB,UAHY,MAIZC,QAAS,kBAAMA,EAAQwB,KACzB7B,KCgBOmD,G,MApByB,SAACrD,GAAW,IAC3CU,EAA+BV,EAA/BU,MAAO4C,EAAwBtD,EAAxBsD,KAAM1B,EAAkB5B,EAAlB4B,WAAYc,EAAM1C,EAAN0C,GAEhC,OACE,yBAAKpC,UAFa,WAGhB,kBAAC,EAAD,CAAQI,MAAOA,EAAOC,MAAO,kBAAC,IAAD,CAAM+B,GAAIA,GAAV,8BAC7B,yBAAKpC,UAAS,UAJE,UAIF,cACXgD,EAAKzB,IAAI,SAAC0B,EAAUC,GACnB,OAAIA,EAAI,EAAU,KACX5B,EAAW2B,EAAMC,SCGnBC,G,MAhB+B,SAAC,GAAoB,IAAnBC,EAAkB,EAAlBA,aAAkB,EACrCC,cADqC,mBACzDC,EADyD,KACrDC,EADqD,UAEhEnE,oBAAU,WACLmE,GACDH,KAED,CAACG,IAGJ,OACE,yBAAKvD,UAFa,cAEWsD,IAAKA,GAChC,kBAAC,EAAD,CAAU5C,MAAO,CAACQ,OAAQ,OAAQC,MAAO,aCbzCT,G,MAAQ,CACZ8C,KAAM,OACNrC,MAAO,OACPD,OAAQ,QACRuC,aAAc,MACdC,SAAU,WA2CGC,EArCiC,SAACjE,GAAW,IACnD2B,EAA4B3B,EAA5B2B,WAAY+B,EAAgB1D,EAAhB0D,aACnB,GAAmB,OAAf/B,QAAsCuC,IAAfvC,EAA0B,OAAO,KAFH,IAGlDwC,EAA8BxC,EAA9BwC,MAAOC,EAAuBzC,EAAvByC,MAAOC,EAAgB1C,EAAhB0C,MAAgB1C,EAAT2C,MAQ5B,OACE,yBAAKhE,UAFa,gBAIhB,kBAAC,EAAD,CAAMqB,WAAYA,EAAW2C,MAAO1C,WAAa,SAAC2B,EAAMC,GAAP,OAC/C,kBAAC,EAAD,CAAWe,IAAKhB,EAAKiB,OAAShB,GAC5B,kBAAC,IAAD,CAAMlD,UAAS,UANH,eAMG,UAA0BoC,GAAE,mBAAca,EAAKiB,SAC5D,kBAAC,EAAD,CAASxD,MAAOA,EAAOE,IAAKqC,EAAKkB,OAAOC,MAAOvD,IAAKoC,EAAKpC,MACzD,yBAAKb,UAAS,UARJ,eAQI,WACZ,wBAAIA,UAAS,UATL,eASK,YAA4BiD,EAAK7C,OAC7C6C,EAAKoB,SAAW,wBAAIrE,UAAS,UAVtB,eAUsB,eAAb,IAA6CiD,EAAKoB,UAAiB,KACpF,0BAAMrE,UAAS,UAXP,eAWO,YACZiD,EAAKqB,OAAOC,QADf,MAC2BtB,EAAKuB,OADhC,MAC2CvB,EAAKwB,QADhD,MAC4DxB,EAAKyB,iBAOxEb,EAAQC,GAASC,EACd,wCACA,kBAAC,EAAD,CAAYX,aA3BF,WACZS,EAAQC,EAAQC,GAClBX,EAAaS,EAAMC,QCEVa,G,MAjByB,SAAC,GAAc,IAAZ3B,EAAW,EAAXA,KACnC4B,EAAQC,EAAc7B,GAE5B,OACE,yBAAKhD,UAFa,WAGhB,wBAAIA,UAAS,UAHG,UAGH,YAAb,4BACC4E,EAAMrD,IAAI,SAAC0B,EAAMC,GAAP,OACT,uBAAGlD,UAAS,UALE,UAKF,OAAuBiE,IAAKf,EAAE,QAASD,QAYrD4B,EAAgB,SAACC,GAGrB,IAFA,IAAMC,EAAM,iBACNC,EAAY,KACL,CACX,IAAIC,EAAMF,EAAIG,KAAKJ,GACnB,IAAIG,EAGF,MAFAD,EAAUG,KAAKF,EAAI,IAKvB,OAAOD,GCdMI,G,MApBE,WAEf,OACE,yBAAKpF,UAFa,YAGhB,yBAAKA,UAAS,UAHE,WAGF,WACZ,0BAAMA,UAAS,UAJD,WAIC,WAA0B,kBAAC,IAAD,OACzC,+CAEF,yBAAKA,UAAS,UAPE,WAOF,WACZ,0BAAMA,UAAS,UARD,WAQC,WAA0B,kBAAC,IAAD,OACzC,+CAEF,yBAAKA,UAAS,UAXE,WAWF,WACZ,0BAAMA,UAAS,UAZD,WAYC,WAA0B,kBAAC,IAAD,OACzC,kD,6jBpBlBIvB,K,qCAAAA,E,sCAAAA,E,uCAAAA,M,cCEAC,O,qBAAAA,I,qBAAAA,I,sBAAAA,M,KAMG,IoBRVD,EpBQU,aAAmD,IAAlD4G,EAAiD,uDAAzC,CAACC,OAAQ5G,EAAO6G,SAAUC,EAAe,uCAC/D,OAAQA,EAAOC,MACb,KAAKhH,EAAYiH,cACf,MAAO,CAACJ,OAAQ5G,EAAO6G,SAEzB,KAAK9G,EAAYkH,cACf,OAAO,EAAP,GAAWN,EAAX,CAAkBC,OAAQ5G,EAAOkH,QAASC,OAAQL,EAAOK,SAE3D,KAAKpH,EAAYqH,cACf,MAAO,CAACR,OAAQ5G,EAAOqH,SAEzB,QACE,OAAOV,IqBjBAW,EAA+CC,I,0CCK/CC,EAAS,mCAGhBC,EAAe,SAACC,EAAgBC,EAAcC,EAAgBzC,EAAgBC,GAClF,IAAMyC,EAAQ,UAAMH,EAAQ,MAAQA,EAAQ,IACtCI,EAAM,UAAMH,EAAM,QAAUA,EAAM,IAClCI,EAAQ,UAAMH,EAAQ,UAAYA,EAAQ,IAC1CI,EAAQ,UAAM7C,EAAQ,UAAYA,EAAQ,IAC1C8C,EAAQ,UAAM7C,EAAQ,UAAYA,EAAQ,IAChD,MAAM,GAAN,OARiB,iCAQjB,0BAAsCoC,GAAtC,OAA+CK,GAA/C,OAA0DC,GAA1D,OAAmEC,GAAnE,OAA8EC,GAA9E,OAAyFC,IAErFC,GAAkB,SAACC,GACvB,MAAM,GAAN,OAXiB,iCAWjB,iBAA6BA,EAA7B,mBAA4CX,IAGjCY,GAAgB,sCAAG,WAAOV,EAAeW,GAAtB,qBAAAC,EAAA,4DACvBV,EAA8BS,EAA9BT,MAAOzC,EAAuBkD,EAAvBlD,MADgB,EACOkD,EAAhBjD,MACfmD,EAAMd,EAAaC,OAAOxC,EAAW0C,EAAOzC,OAFpB,MACD,KADC,YAGjBqD,IAAWD,GAAKE,KAAK,SAACC,GAAD,OAASA,EAAIC,SAHjB,iFAAH,wDAMhBC,GAAc,sCAAG,WAAOjB,EAAaU,GAApB,qBAAAC,EAAA,4DACrBV,EAA8BS,EAA9BT,MAAOzC,EAAuBkD,EAAvBlD,MADc,EACSkD,EAAhBjD,MACfmD,EAAMd,OAAavC,EAAWyC,EAAKC,EAAOzC,OAFpB,MACC,KADD,YAGfqD,IAAWD,GAAKE,KAAK,SAACC,GAAD,OAASA,EAAIC,SAHnB,iFAAH,wDAKdE,GAAc,sCAAG,WAAOV,GAAP,SAAAG,EAAA,qEACfE,IAAWN,GAAgBC,IAAOM,KAAK,SAACC,GAAD,OAASA,EAAIC,SADrC,iFAAH,sDC/BdG,GAAc,SAACX,GAC1B,OAAO,SAACY,GACNA,EAASC,MACTH,GAAeV,GACZM,KAAK,SAAAnE,GACJyE,EAASE,GAAa3E,MAEvB4E,MAAM,SAAAC,GACLJ,EAASK,GAAaD,QAKxBH,GAAe,iBAAO,CAC1BjC,KAAMhH,EAAYiH,gBAGdiC,GAAe,SAAC9B,GAAD,MAAkB,CACrCJ,KAAMhH,EAAYkH,cAClBE,WAGIiC,GAAe,SAACC,GAAD,MAAiB,CACpCtC,KAAMhH,EAAYqH,cAClBiC,UCxBaC,I,MCKW,SAACtI,GACzB,IADwC,ECHX,SAACmH,GAC9B,IAAMY,EAAWQ,cACjB7I,oBAAU,WACRqI,EAASD,GAAYX,KACpB,IAGH,MAAO,CAACxB,MADMW,EAAY,SAAAX,GAAK,OAAIA,EAAM6C,SAASC,KACnCC,gBAFS,SAACvB,GAAD,OAAkBY,EAASD,GAAYX,MDC9BwB,CADlB3I,EAAM4I,MAAMC,OAApB1B,MACAxB,EAHiC,EAGjCA,MAEQQ,GALyB,EAG1BuC,gBAEW/C,EAAlBC,OAAkBD,EAAVQ,QACf,OAAIR,EAAMC,SAAW5G,EAAO6G,QAAgB,KACxCF,EAAMC,SAAW5G,EAAOqH,QAAgB,KAE1C,yBAAK/F,UAAU,WACb,yBAAKU,MAAO,CAACQ,OAAQ,SACxB,kBAAC,EAAD,CAAQvB,YAAa,kBAAC,EAAD,CAAUa,KAAM,kBAAC,IAAD,MAAgBE,MAAO,CAAC8H,WAAY,WACrE1I,YAAa,kBAAIJ,EAAM+I,QAAQC,aAGhC,yBAAK1I,UAAS,UAdE,UAcF,WACZ,yBAAKA,UAAS,UAfA,UAeA,eACZ,yBAAKA,UAAS,UAhBF,UAgBE,SACTY,IAAKiF,EAAO8C,MACZ9H,IAAKgF,EAAOhF,OAEnB,yBAAKb,UAAS,UApBA,UAoBA,kBACZ,wBAAIA,UAAS,UArBD,UAqBC,YAA4B6F,EAAOzF,OAChD,0BAAMJ,UAAS,UAtBH,UAsBG,aAAf,qBAA+C6F,EAAOrB,QACtD,0BAAMxE,UAAS,UAvBH,UAuBG,mBAAf,IAAmD6F,EAAO+C,gBAG9D,kBAAC,EAAD,MAEA,kBAAC,EAAD,MACA,kBAAC,EAAD,MAEA,kBAAC,EAAD,CAAS5F,KAAM6C,EAAOlB,c,SLxCvBlG,K,mCAAAA,E,qDAAAA,E,6CAAAA,E,oCAAAA,E,qCAAAA,E,sCAAAA,M,KAQUA,S,ujBONf,IAKYC,GALNmK,GAAe,CACnBzC,MAAO,GACP0C,cAAe,IAAIC,IACnBC,UAAW,O,SAEDtK,O,qBAAAA,I,qBAAAA,I,sBAAAA,Q,KAKZ,ICZYD,GCEAC,GFsCGuK,GA5BO,WAAwC,IAAvC5D,EAAsC,uDAA9BwD,GAAcrD,EAAgB,uCAC3D,OAAQA,EAAOC,MAEb,KAAKhH,GAAYyK,aACf,OAAO,MAAI7D,EAAX,CAAkBe,MAAOZ,EAAOY,QAElC,KAAK3H,GAAY0K,sBAEf,OADAtG,QAAQC,IAAI0C,EAAOsD,eACZ,MAAIzD,EAAX,CAAkByD,cAAetD,EAAOsD,gBAE1C,KAAKrK,GAAY2K,kBACf,OAAO,MAAI/D,EAAX,CAAkB2D,UAAWxD,EAAOwD,YAGtC,KAAKvK,GAAYiH,cACf,OAAO,MAAIL,EAAX,CAAkBC,OAAQ5G,GAAO6G,UAEnC,KAAK9G,GAAYkH,cACf,OAAO,MAAIN,EAAX,CAAkBC,OAAQ5G,GAAOkH,UAEnC,KAAKnH,GAAYqH,cACf,OAAO,MAAIT,EAAX,CAAkBC,OAAQ5G,GAAOqH,UAEnC,QACE,OAAOV,I,ikBCpCD5G,K,2CAAAA,E,sCAAAA,E,uCAAAA,E,wCAAAA,Q,cCEAC,O,qBAAAA,I,qBAAAA,I,sBAAAA,Q,KAKG,ICCC+J,GDDD,cAAmD,IAAlDpD,EAAiD,uDAAzC,CAACC,OAAQ5G,GAAO6G,SAAUC,EAAe,uCAC/D,OAAQA,EAAOC,MACb,KAAKhH,GAAY4K,gBACf,OAAO,MAAIhE,EAAX,CAAkBQ,OAAQL,EAAOwD,YAEnC,KAAKvK,GAAYiH,cACf,MAAO,CAACJ,OAAQ5G,GAAO6G,SAEzB,KAAK9G,GAAYkH,cACf,OAAO,MAAIN,EAAX,CAAkBC,OAAQ5G,GAAOkH,QAASC,OAAQL,EAAOK,SAE3D,KAAKpH,GAAYqH,cACf,MAAO,CAACR,OAAQ5G,GAAOqH,SAEzB,QACE,OAAOV,I,kBEfAoD,GAAUa,eAEjBC,IDDUd,GCCsBA,GDDNe,YAAgB,CAC9CC,OAAQC,YAAcjB,IACtBkB,OAAQV,GACRW,QAASC,GACT3B,QAAS4B,K,ICC4BC,G,iBCTnCC,GAAWxK,EAAQ,IAKVyK,GAAc,SAAC7D,GAAD,MAAoB,CAC7CX,KAAMhH,GAAYyK,aAClB9C,UAEW8D,GAAkB,SAAClB,GAAD,MAAqB,CAClDvD,KAAMhH,GAAY2K,kBAClBJ,cAEWmB,GAAsB,SAACrB,GAAD,MAAiC,CAClErD,KAAMhH,GAAY0K,sBAClBL,kBAuBWsB,GAAoB,SAAChE,GAChC,OAAO,SAACqB,GACNA,EAASC,MACTZ,GAAiBV,EAAO,CAACE,MAAO,UAC7Ba,KAAK,SAAAnE,GACJyE,EAASE,MACTF,EAASyC,GAAgBlH,MAE1B4E,MAAM,SAAAC,GACLJ,EAASK,UAkBJuC,GAAkB,SAACjE,GAC9B,OAAO,SAACqB,GACNA,EAASwC,GAAY7D,IACrBqB,EAAS6C,GAAalE,IACtBqB,EAlBkC,SAACrB,GACrC,OAAO,SAACqB,GACNA,EAASC,MACTZ,GAAiBV,EAAO,CAACE,MAAO,qEAC7Ba,KAAK,SAAAnE,GACJyE,EAASE,MACTF,EAASyC,GAAgBlH,MAE1B4E,MAAM,SAAAC,GACLJ,EAASK,SASJyC,CAAuBnE,IAChCqB,EAAStC,aAAK,oBA0BLmF,GAAe,SAAClE,GAC3B,OAAO,SAACqB,EAAe+C,GACrB,IAAM1B,EAAgB0B,IAAWb,OAAOb,cACpC2B,EAAgCC,GAAQ5B,GAC5CrB,EAAS0C,GAAoBM,EAAiBE,IAAIvE,KAClDqB,EAASmD,GAAoBH,MAGpBG,GAAsB,SAAC9B,GAClC,OAAO,SAACrB,GACN,IAAMrB,EAAQyE,KAAKC,UAAL,aAAmBhC,IACjCiC,aAAaC,QAAQ,aAAc5E,KAwBjCsB,GAAe,iBAAO,CAC1BjC,KAAMhH,GAAYiH,gBAGdiC,GAAe,iBAAO,CAC1BlC,KAAMhH,GAAYkH,gBAGdmC,GAAe,iBAAO,CAC1BrC,KAAMhH,GAAYqH,gBAGd4E,GAAU,SAACO,GACf,IAAIC,EAAS,IAAInC,IAEjB,OADAkC,EAAIE,QAAQ,SAAAlI,GAAI,OAAIiI,EAAOP,IAAI1H,KACxBiI,GC3IIE,GAAiB,WAC5B,IAAM3D,EAAWQ,cAIjB,MAAO,CAAC7B,MAFMJ,EAAY,SAAAX,GAAK,OAAIA,EAAMsE,OAAOvD,OAAO+B,KAExCkD,SAHE,SAACjF,GAAD,OAAmBqB,EDcjB,SAACrB,GACpB,OAAO,SAACqB,GACNA,EAASwC,GAAY7D,IAEA,IAAjBA,EAAMkF,QAIV7D,EAAStC,aAAK,cACd6E,GAAS,WACPvC,EAAS2C,GAAkBhE,KAC1B,IAFH4D,IAJEvC,EAAStC,aAAK,aCnB2BoG,CAAMnF,OAKxCoF,GAAe,WAE1B,MAAO,CAACxC,UADUhD,EAAY,SAAAX,GAAK,OAAIA,EAAMsE,OAAOX,WAAWb,OAGpDsD,GAAuB,WAClC,IAAMhE,EAAWQ,cAEjB,MAAO,CADc,SAACpE,GAAD,OAAmB4D,EDsDZ,SAAC5D,GAC7B,OAAO,SAAC4D,EAAe+C,GACrB,IAAMxB,EAAYwB,IAAQ,OAAaxB,UACjC5C,EAAQoE,IAAQ,OAAapE,MAC7BsF,EAAeb,KAAKc,MAAMd,KAAKC,UAAU9B,IAC/ClC,GAAiBV,EAAO,CAACE,MAAO,mEAAoEzC,MAAOA,IACxGsD,KAAK,SAAAnE,GACJ0I,EAAa5H,MAAQd,EAAKc,MAC1B4H,EAAa7H,MAAQb,EAAKa,MAC1B6H,EAAa3H,MAAQf,EAAKe,MAC1B,IAAM6H,EAAOF,EAAa1H,MAAM6H,OAAO7I,EAAKgB,OAC5C0H,EAAa1H,MAAQ4H,EACrBnE,EAASyC,GAAgBwB,OClEkBI,CAAejI,OAGrDkI,GAAiB,WAC5B,IAAMtE,EAAWQ,cAEjB,MAAO,CAAC+D,kBADkB,SAAC5F,GAAD,OAAmBqB,EAAS4C,GAAgBjE,OAG3D6F,GAAmB,WAC9B,IAAMxE,EAAWQ,cAIjB,MAAO,CAACiE,QAHQ,kBAAMzE,EDiFf,SAACA,GACN,IACIqB,EADA1C,EAAQ2E,aAAaoB,QAAQ,cAE7B/F,IACF0C,EAAgB+B,KAAKc,MAAMvF,IAE7BqB,EAAS0C,GAAoB,IAAIpB,IAAID,QCpFtBsD,WAFE,kBAAM3E,ED2FlB,SAACA,GACNA,EAAS0C,GAAoB,IAAIpB,MACjCgC,aAAaC,QAAQ,aAAc,OC3FRlC,cADP9C,EAAY,SAAAX,GAAK,OAAIA,EAAMsE,OAAOb,kBCM3CuD,I,MAlCiB,WAAO,IAAD,EACQJ,KAArCC,EAD6B,EAC7BA,QAASE,EADoB,EACpBA,WAAWtD,EADS,EACTA,cACpBkD,EAAqBD,KAArBC,kBACP5M,oBAAU,WACR8M,KACA,IAoBF,OAA8B,IAAvBpD,EAAcwD,KACjB,KAVF,yBAAKtM,UAVa,kBAWhB,kBAAC,EAAD,CAAQI,MAAM,2BACNC,MAAO,kBAAC,EAAD,CAAUG,KAAM,kBAAC,IAAD,QAAiBP,QAASmM,IAEzD,6BAbY,WACd,IAAInH,EAA0B,GAK9B,OAJA6D,EAAcqC,QAAQ,SAAClI,GACrBgC,EAAIE,KAAK,kBAAC,EAAD,CAAKlB,IAAK,MAAQhB,EACbxB,SAAUwB,EAAMhD,QAAS+L,GAAqB/I,MAEvDgC,EAQFsH,OCgBMC,I,MApCkB,SAAC9M,GAAe,IAAD,EACpB0L,KAAnBhF,EADuC,EACvCA,MAAOiF,EADgC,EAChCA,SACRoB,EAAUC,iBAAyB,MAYzC,OACE,yBAAK1M,UAAS,UAFI,eAGhB,kBAAC,IAAD,CAAMA,UAAS,UAHC,aAGD,UAA0BoC,GAAG,SAC1C,kBAAC,EAAD,CAAU5B,KAAM,kBAAC,IAAD,SAElB,2BAAOR,UAAS,UANA,aAMA,WACTqL,SAVU,SAACrM,GACpBqM,EAASrM,EAAE2N,OAAOvG,QAUT9C,IAAKmJ,EACLhH,KAAK,OACLW,MAAOA,EACPwG,YAAY,iBAElBxG,EACC,kBAAC,EAAD,CAAUpG,UAAS,UAdL,aAcK,OACZQ,KAAM,kBAAC,IAAD,MACNP,QA1BQ,WACnBoL,EAAS,IACT,IAAMwB,EAAOJ,EAAQK,QACjBD,GACFA,EAAKE,WAwBD,QCjBKC,I,MAjBI,SAACtN,GAAgB,IAC1BsJ,EAAcwC,KAAdxC,UACDgD,EAAqBD,KAArBC,kBAEP,GAAkB,OAAdhD,EAAoB,OAAO,KAE/B,OACE,6BACE,kBAAC,EAAD,CAAM3H,WAAY2H,EAAUhF,MAAO1C,WAAa,SAAC2B,GAAD,OAC9C,kBAAC,EAAD,CAAUhD,QAAS+L,EAAmBvK,SAAUwB,EAAK7C,MAAO6D,IAAKhB,EAAKiB,QACpE,yBAAKlE,UAAS,UALF,cAKE,WAA2BiD,EAAK7C,cCIzC6M,GAfK,WAAO,IAClBjE,EAAawC,KAAbxC,UADiB,EAEDyC,KAAhByB,EAFiB,oBAIxB,GADArK,QAAQC,IAAIkG,GACM,OAAdA,EAAoB,OAAO,KAI/B,OACE,6BACE,kBAAC,EAAD,CAAa3H,WAAY2H,EAAW5F,aAL3B,SAACS,GACZqJ,EAAarJ,QCMFsJ,GAbU,SAACzN,GACxB,OACE,6BACE,kBAAC,GAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO0N,OAAK,EAACnL,KAAK,WAAWO,UAAW6J,KACxC,kBAAC,IAAD,CAAOe,OAAK,EAACnL,KAAK,YAAYO,UAAWwK,KACzC,kBAAC,IAAD,CAAOI,OAAK,EAACnL,KAAK,gBAAgBO,UAAWyK,QCPxCI,GAAmB,WAC9B,OAAO,SAAC5F,GACNA,EAASC,MACTJ,GAAe,OAAQ,CAAChB,MAAO,qEAC5Ba,KAAK,SAAAnE,GACJyE,EAASE,GAAa3E,MAEvB4E,MAAM,SAAAC,GACLJ,EAASK,GAAaD,QAoBxByF,GAAgB,SAACtE,GAAD,MAAqB,CACzCvD,KAAMhH,GAAY4K,gBAClBL,cAEItB,GAAe,iBAAO,CAC1BjC,KAAMhH,GAAYiH,gBAGdiC,GAAe,SAAC9B,GAAD,MAAkB,CACrCJ,KAAMhH,GAAYkH,cAClBE,WAGIiC,GAAe,SAACC,GAAD,MAAiB,CACpCtC,KAAMhH,GAAYqH,cAClBiC,UC/BWwF,GAAmB,WAC9B,IAAM9F,EAAWQ,cAGjB,MAAO,CADcjC,EAAY,SAAAX,GAAK,OAAIA,EAAMuE,SAASzB,KADjC,SAACtE,GAAD,OAAmB4D,EDFP,SAAC5D,GAErC,OADAhB,QAAQC,IAAIe,GACL,SAAC4D,EAAe+C,GACrB,IAAMZ,EAAUY,IAAQ,QAAc3E,OAChC2H,EAAa3C,KAAKc,MAAMd,KAAKC,UAAUlB,IAC7CtC,GAAe,OAAQ,CAAChB,MAAO,mEAAoEzC,MAAOA,IACvGsD,KAAK,SAAAnE,GACJwK,EAAW1J,MAAQd,EAAKc,MACxB0J,EAAW3J,MAAQb,EAAKa,MACxB2J,EAAWzJ,MAAQf,EAAKe,MACxB,IAAM6H,EAAO4B,EAAWxJ,MAAM6H,OAAO7I,EAAKgB,OAC1CwJ,EAAWxJ,MAAQ4H,EACnBnE,EAAS6F,GAAcE,OCVuBC,CAAuB5J,OChB9D6J,GCGH,SAAChO,GAAgB,IAIvBiO,EAFElI,EADU/F,EAAT4I,MACYC,OAAO9C,KAFA,EAGS8H,KAHT,mBAGnB3D,EAHmB,KAGVgE,EAHU,KAK1B,OAAQnI,GACN,IAAK,UACHkI,EAAY/D,EAAQ/D,OAKxB,OACE,6BACE,yBAAKnF,MAAO,CAACQ,OAAQ,SACnB,kBAAC,EAAD,CAAQvB,YAAa,kBAAC,EAAD,CAAUa,KAAM,kBAAC,IAAD,MAAgBE,MAAO,CAAC8H,WAAY,WACjE1I,YAAa,kBAAIJ,EAAM+I,QAAQC,aAGzC,kBAAC,EAAD,CAAarH,WAAYsM,EAAWvK,aAV3B,SAACS,GACZ+J,EAAgB/J,QCbLgK,I,MCOW,WAAO,IAAD,EJJN,WACxB,IAAMpG,EAAWQ,cACjB7I,oBAAU,WACRyD,QAAQC,IAAI,MACZ2E,EAAS4F,OACR,CAAC5F,IAIJ,MAAO,CAFczB,EAAY,SAAAX,GAAK,OAAIA,EAAMuE,SAASzB,KADjC,SAACtE,GAAD,OAAmB4D,EAAS4F,QIDlCS,GAAXlE,EADuB,oBAEvBtE,EAAkBsE,EAAlBtE,OAAQO,EAAU+D,EAAV/D,OAGf,OADAhD,QAAQC,IAAI8G,GACRtE,IAAW5G,GAAO6G,QAAiB,KAErC,yBAAKvF,UAJa,YAKfsF,IAAW5G,GAAOkH,QACjB,kBAAC,EAAD,CAASxD,GAAG,eACHY,KAAM6C,EAAO7B,MACb5D,MAAM,2BACNkB,WAAY,SAAC2B,EAAUC,GAAX,OACnB,kBAAC,IAAD,CAAMlD,UAAS,UAVH,WAUG,UACAoC,GAAE,mBAAca,EAAKiB,QACrBD,IAAKhB,EAAKiB,OAAShB,EAAI,MACrC,yBAAKlD,UAAS,UAbH,WAaG,eACb,yBAAKA,UAAS,UAdJ,WAcI,SAAyBY,IAAG,UAAKqC,EAAK0F,MAAV,mBAA0BzC,MAErE,wBAAIlG,UAAS,UAhBF,WAgBE,YAA4BiD,EAAK7C,OAC9C,0BAAMJ,UAAS,UAjBJ,WAiBI,aAA6BiD,EAAKuB,YAIlD,4D,SCVKuJ,I,MAjBW,WACxB,OACE,yBAAKrN,MAAO,CAACQ,OAAQ,SACnB,kBAAC,EAAD,CAAQvB,YAAa,kBAAC,EAAD,CAAUa,KAAM,kBAAC,IAAD,MAAWE,MAAO,CAAC8H,WAAY,WAC5D1I,YAAa,kBAAIkO,aAAM,yCACvBnO,aACE,kBAAC,IAAD,CAAMuC,GAAG,WACP,kBAAC,EAAD,CAAU5B,KAAM,kBAAC,IAAD,MAAaE,MAAO,CAACuN,YAAa,cAK9D,kBAAC,KAAD,SCJSC,GATQ,WACrB,OACE,oCACE,kBAAC,GAAD,MACA,kBAAC,GAAD,QCMSC,GAZF,WACX,OACE,yBAAKzN,MAAO,CAAC0N,QAAQ,OAAOC,eAAe,SAASC,WAAW,WAA/D,uECMWC,GATD,WACZ,OACE,yBAAK7N,MAAO,CAAC0N,QAAQ,OAAOC,eAAe,SAASC,WAAW,WAA/D,uEC6BWE,I,MApBO,WACpB,OACE,yBAAKxO,UAAU,OACb,kBAAC,IAAD,CAAUyO,KAAK,IAAIrM,GAAG,UACtB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOH,KAAK,aAAaO,UAAWkL,KACpC,kBAAC,IAAD,CAAOzL,KAAK,iBAAiBO,UAAWwF,KACxC,kBAAC,IAAD,CAAO/F,KAAK,UAAUO,UAAW2K,KACjC,kBAAC,IAAD,CAAOlL,KAAK,IAAIQ,OAAQ,SAAAC,GAAU,OAChC,kBAAC,EAAD,KACE,kBAAC,EAAD,CAAST,KAAM,QAASO,UAAW0L,GAAM/L,IAAKuM,KAC9C,kBAAC,EAAD,CAASzM,KAAM,QAASO,UAAW2L,GAAMhM,IAAKwM,KAC9C,kBAAC,EAAD,CAAS1M,KAAM,SAAUO,UAAW+L,GAAOpM,IAAKyM,aAStDF,GAAW,kBACf,oCACE,0BAAM1O,UAAU,gBAAe,kBAAC,IAAD,OAC/B,0BAAMA,UAAU,iBAAhB,kBAGE2O,GAAW,kBACf,oCACE,0BAAM3O,UAAU,gBAAe,kBAAC,IAAD,OAC/B,0BAAMA,UAAU,iBAAhB,kBAGE4O,GAAW,kBACf,oCACE,0BAAM5O,UAAU,gBAAe,kBAAC,IAAD,OAC/B,0BAAMA,UAAU,iBAAhB,kBCzCE6O,InBKiC9E,QmBLVnG,EnBMbkL,YACZvF,GACAQ,GACAgF,YACEC,YACEC,aAAiBxG,IACjByG,QmBVRC,IAAS1M,OACP,kBAAC,IAAD,CAAUoM,MAAOA,IACf,kBAAC,IAAD,CAAiBpG,QAASA,IACxB,kBAAC,GAAD,QAGF2G,SAASC,eAAe,W","file":"static/js/main.900c42bb.chunk.js","sourcesContent":["export enum ActionTypes {\r\n  FETCH_STARTED = 'DETAILS/FETCH_STARTE',\r\n  FETCH_SUCCESS='DETAILS/FETCH_SUCCESS',\r\n  FETCH_FAILURE = 'DETAILS/FETCH_FAILURE'\r\n}","import {ActionTypes} from \"./actionTypes\"\r\n\r\nexport enum Status {\r\n  LOADING,\r\n  SUCCESS,\r\n  FAILURE\r\n}\r\n\r\nexport default (state = {status: Status.LOADING}, action:any) => {\r\n  switch (action.type) {\r\n    case ActionTypes.FETCH_STARTED: {\r\n      return {status: Status.LOADING}\r\n    }\r\n    case ActionTypes.FETCH_SUCCESS: {\r\n      return {...state, status: Status.SUCCESS, result: action.result}\r\n    }\r\n    case ActionTypes.FETCH_FAILURE: {\r\n      return {status: Status.FAILURE}\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import {useEffect, useState} from \"react\"\r\nimport {useInView} from \"react-intersection-observer\"\r\nimport {addMatchSearch} from \"../containers/search/redux/actions\"\r\nimport {useDispatch} from \"react-redux\"\r\n\r\n const useScrollBar = () => {\r\n  const [isInTop, setIsInTop] = useState(true)\r\n  const handleScroll = (e: any) => {\r\n    const scrollY = window.pageYOffset\r\n    if (scrollY > 0) {\r\n      setIsInTop(false)\r\n    } else {\r\n      setIsInTop(true)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll, true)\r\n\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll, true)\r\n    }\r\n  })\r\n  return [isInTop]\r\n}\r\nexport default useScrollBar\r\nexport const useBottomLoad = (callBack: any) => {\r\n  const [ref,inView,entry] = useInView()\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if(inView) {\r\n      callBack()\r\n    }\r\n  }, [inView])\r\n\r\n  return [ref]\r\n}\r\n\r\n\r\n","import React, {useEffect} from 'react'\r\nimport useScrollBar from '../../common/hook'\r\n\r\nimport './navbar.scss'\r\nconst classNames = require('classnames')\r\n\r\ninterface NavBarProps {\r\n  leftContent?: React.ReactNode\r\n  leftOnClick?: (e?: any) => void\r\n  children?: React.ReactNode\r\n  rightContent?: React.ReactNode\r\n}\r\n\r\nconst NavBar: React.FC<NavBarProps> = (props) => {\r\n  const {leftContent, children,rightContent,leftOnClick} = props\r\n  const [isInTop] = useScrollBar()\r\n\r\n  const classPrefix = 'navbar'\r\n  const rootClassName = classNames({\r\n    [`${classPrefix}`]: true,\r\n    [`${classPrefix}--active`]: !isInTop\r\n  })\r\n  return (\r\n    <div className={rootClassName} >\r\n      <div className={`${classPrefix}__left`}\r\n           onClick={leftOnClick}>\r\n        {leftContent}\r\n      </div>\r\n      <div className={`${classPrefix}__middle`}>\r\n        {children}\r\n      </div>\r\n      <div className={`${classPrefix}__right`}>\r\n        {rightContent}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n","import React from 'react'\r\nimport './dividers.scss'\r\n\r\nconst Dividers = () => (\r\n  <div className='dividers'></div>\r\n)\r\n\r\nexport default Dividers","import React from 'react'\nimport './header.scss'\n\ninterface HeaderProps {\n  title: string\n  extra?: React.ReactNode\n  onClick?: () =>void\n}\n\nconst  Header: React.FC<HeaderProps> = (props) => {\n  const { title, extra, ...other } = props\n\n  const classPrefix = 'header'\n  return (\n    <div className={classPrefix}>\n      <h2 className={`${classPrefix}__title`}>{title}</h2>\n      <div className={`${classPrefix}__extra`} {...other}>\n        { extra }\n      </div>\n    </div>\n  );\n};\n\nexport default Header;","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './icon_wrap.scss'\r\n\r\ninterface IconWrapProps {\r\n  className?: string\r\n  icon: React.ReactNode\r\n  style?: object\r\n  onClick?: (e:any) => void\r\n}\r\n\r\nconst IconWrap: React.FC<IconWrapProps> = ({className, icon, ...other}) => (\r\n  <span className={`icon-wrap ${className}`} {...other}>\r\n    {icon}\r\n  </span>\r\n)\r\n\r\nIconWrap.propTypes = {\r\n  className: PropTypes.string,\r\n  icon: PropTypes.node.isRequired,\r\n  style: PropTypes.object,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nexport default IconWrap","import React from 'react'\r\nimport './load_icon.scss'\r\n\r\ninterface LoadIconProps {\r\n  style: object\r\n}\r\n\r\nconst LoadIcon: React.FC<LoadIconProps> = ({style}) => {\r\n  const classPrefix = 'load-icon'\r\n  return (\r\n    <div className={classPrefix} style={style}>\r\n      <div className={`${classPrefix}__circle`}>\r\n        <div className={`${classPrefix}__arc`}></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadIcon","import React, {useState} from 'react'\r\nimport LoadIcon from \"../load_icon\"\r\nimport './img_wrap.scss'\r\n\r\ninterface ImgWrapProps {\r\n  style: any\r\n  src: string\r\n  alt?: string\r\n}\r\n\r\nconst ImgWrap: React.FC<ImgWrapProps> = (props) => {\r\n  const {src, alt, style} = props\r\n  const [imageStatus, setImageStatus] = useState('loading')\r\n  const classPrefix = 'img-wrap'\r\n  return (\r\n    <div className={classPrefix} style={style}>\r\n      <img className={`${classPrefix}__img`} src={src} alt={alt}\r\n           onLoad={() => setImageStatus('loaded')}\r\n           onError={() => setImageStatus('failed')}\r\n      />\r\n      {imageStatus === 'loading'\r\n        ? <div className={`${classPrefix}__mask`}><LoadIcon style={{height:'48px',width:'48px'}}/></div>\r\n        : null\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nImgWrap.propTypes = {}\r\n\r\nexport default ImgWrap","import React from 'react'\r\nimport './list.scss'\r\n\r\ninterface ListProps {\r\n  dataSource: Array<any>\r\n  renderItem: (item: any, key?: any) => React.ReactNode\r\n}\r\nconst List: React.FC<ListProps> = (props) => {\r\n  const {dataSource, renderItem} = props\r\n  const classPrefix = 'list'\r\n  return (\r\n    <div className={classPrefix}>\r\n      <ul>\r\n        {dataSource.map(renderItem)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\ninterface ItemProps {\r\n  children: React.ReactNode\r\n  metaData?: any\r\n  onClick?: (metaData: any, e?: any) => void\r\n}\r\n\r\nconst ListItem: React.FC<ItemProps> = (props) => {\r\n  const {children, metaData, onClick} = props\r\n  const handleClick = (e: any) => {\r\n    if (!onClick) return\r\n    onClick(metaData, e)\r\n  }\r\n  return (\r\n    <li onClick={handleClick}>\r\n      {children}\r\n    </li>\r\n  )\r\n}\r\n\r\nListItem.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  metaData: PropTypes.any,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nexport default ListItem\r\n","import React from 'react';\r\n\r\ninterface TabContentProps {\r\n  panels: React.ReactNode | React.ReactNodeArray\r\n}\r\nconst TabContent: React.FC<any> = (props) => {\r\n  const {panels} = props\r\n  return (\r\n    <div className=\"tabs-content\">\r\n      {panels}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabContent;","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nconst TabNav: React.FC<any> = (props: any) => {\r\n  const { classPrefix, panels } = props\r\n\r\n  const getTabs = () => {\r\n    return React.Children.map(panels, (child) => {\r\n      if (!child) return\r\n      let path = child.props.path\r\n      let Tab = child.props.tab\r\n      return (\r\n        <Link to={path} className={`${classPrefix}__tab`}>\r\n          <Tab />\r\n        </Link>\r\n      )\r\n    })\r\n  }\r\n  return (\r\n    <nav className={`${classPrefix}__nav`}>\r\n      <div className={`${classPrefix}__bar`}>\r\n        {getTabs()}\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default TabNav;\r\n","import React, { useState } from 'react';\r\nimport './Tabs.scss';\r\n\r\nimport TabContent from './TabContent';\r\nimport TabNav from './TabNav';\r\n\r\n\r\ninterface TabsProps {\r\n  className?: string\r\n  classPrefix?: string\r\n  children?: any\r\n  defaultActiveIndex?: number //组件内控制\r\n  activeIndex?: number //组件外控制\r\n  onChange?: any\r\n}\r\n\r\nconst Tabs: React.FC<TabsProps> = (props) => {\r\n  const {\r\n    classPrefix = \"m-tabs\",\r\n    className,\r\n    children\r\n  } = props\r\n\r\n  const renderTabNav = () => {\r\n    return (\r\n      <TabNav\r\n        classPrefix={classPrefix}\r\n        panels={children}\r\n       />\r\n    )\r\n  }\r\n  const renderTabContent = () => {\r\n    return (\r\n      <TabContent\r\n        classPrefix={classPrefix}\r\n        panels={children}\r\n        />\r\n    )\r\n  }\r\n  return (\r\n    <div className=\"\">\r\n      {renderTabContent()}\r\n      {renderTabNav()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tabs;\r\n\r\n","import React from 'react';\r\nimport { Route } from 'react-router';\r\n\r\ninterface TabPaneProps {\r\n  path: string\r\n  component: any\r\n  tab?: any\r\n}\r\nconst TabPane: React.FC<TabPaneProps> = (props) => {\r\n  const {path, component: Component } = props\r\n  return (\r\n    <Route path={path} render={routeProps => {\r\n      return (\r\n        <Component />\r\n      )\r\n    }} />\r\n  );\r\n}\r\n\r\nexport default TabPane;","import React from 'react'\r\nimport './tag.scss'\r\n\r\ninterface TagProps {\r\n  metaData: any\r\n  children: React.ReactChild\r\n  onClick?: any\r\n}\r\n\r\nconst Tag: React.FC<TagProps> = (props) => {\r\n  const { children,  onClick = (d:any)=>{}, metaData } = props\r\n  const classPrefix = \"tag\"\r\n  console.log(metaData)\r\n  return (\r\n    <span className={classPrefix}\r\n          onClick={() => onClick(metaData)}>\r\n      { children }\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Tag\r\n","import React from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {Header} from \"../index\"\r\nimport './express.scss'\r\n\r\ninterface ExpressProps {\r\n  title: string\r\n  to: string\r\n  data: any\r\n  renderItem:any\r\n}\r\n\r\nconst Express: React.FC<ExpressProps> = (props) => {\r\n  const {title, data, renderItem, to} = props\r\n  const classPrefix = 'express'\r\n  return (\r\n    <div className={classPrefix}>\r\n      <Header title={title} extra={<Link to={to}>查看全部</Link>} />\r\n      <div className={`${classPrefix}__content`}>\r\n        {data.map((item:any, i:any) => {\r\n          if (i > 5) return null\r\n          return renderItem(item, i)\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nExpress.propTypes = {\r\n\r\n}\r\n\r\nexport default Express","import React, {useEffect} from 'react'\r\nimport {useInView} from \"react-intersection-observer\"\r\nimport {LoadIcon} from \"../index\"\r\nimport './bottom_load.scss'\r\ninterface BottomLoadProps {\r\n  loadCallBack: () => void\r\n}\r\n\r\nconst BottomLoad: React.FC<BottomLoadProps> = ({loadCallBack}) => {\r\n  const [ref,inView,entry] = useInView()\r\n  useEffect(() => {\r\n    if(inView) {\r\n      loadCallBack()\r\n    }\r\n  }, [inView])\r\n\r\n  const classPrefix = 'bottom-load'\r\n  return (\r\n    <div className={classPrefix} ref={ref}>\r\n      <LoadIcon style={{height: '30px', width: '30px'}}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BottomLoad","import React, {useState} from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {ImgWrap,List, ListItem} from \"../index\"\r\nimport BottomLoad from \"../bottom_load\"\r\nimport './details_list.scss'\r\n\r\nconst style = {\r\n  flex: 'none',\r\n  width: '72px',\r\n  height: '106px',\r\n  borderRadius: '4px',\r\n  overflow: 'hidden'\r\n}\r\ninterface DetailsListProps {\r\n  dataSource: any\r\n  loadCallBack?: any\r\n}\r\nconst DetailsList: React.FC<DetailsListProps> = (props) => {\r\n  const {dataSource, loadCallBack} = props\r\n  if (dataSource === null || dataSource === undefined) return null\r\n  const {start, count, total, books} = dataSource\r\n  const checkLoad = () => {\r\n    if (start + count < total) {\r\n      loadCallBack(start+count)\r\n    }\r\n  }\r\n\r\n  const classPrefix = 'details-list'\r\n  return (\r\n    <div className={classPrefix}>\r\n    {/* 列表*/}\r\n      <List dataSource={dataSource.books} renderItem={((item, i) => (\r\n        <ListItem  key={item.isbn13 + i}>\r\n          <Link className={`${classPrefix}__wrap`} to={`/details/${item.isbn13}`}>\r\n            <ImgWrap style={style} src={item.images.small} alt={item.alt} />\r\n            <div className={`${classPrefix}__info`}>\r\n              <h3 className={`${classPrefix}__title`}>{item.title}</h3>\r\n              {item.subtitle ? <h4 className={`${classPrefix}__subtitle`}> {item.subtitle}</h4> : null}\r\n              <span className={`${classPrefix}__other`}>\r\n                {item.rating.average} / {item.author} / {item.pubdate} / {item.publisher}\r\n              </span>\r\n            </div>\r\n          </Link>\r\n        </ListItem>\r\n      ))}/>\r\n    {/*  TODO更多   */}\r\n      {start + count >= total\r\n        ? <div>The End</div>\r\n        : <BottomLoad loadCallBack={checkLoad}/>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DetailsList","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './summary.scss'\r\n\r\ninterface SummaryProps {\r\n  data: string\r\n}\r\n\r\nconst summary: React.FC<SummaryProps> = ({ data }) => {\r\n  const array = delimitedText(data)\r\n  const classPrefix = 'summary'\r\n  return (\r\n    <div className={classPrefix}>\r\n      <h3 className={`${classPrefix}__title`}>内容简介</h3>\r\n      {array.map((item, i) => (\r\n        <p className={`${classPrefix}__p`} key={i+'text'}>{item}</p>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nsummary.propTypes = {\r\n  data: PropTypes.string.isRequired\r\n}\r\n\r\nexport default summary\r\n\r\nconst delimitedText = (text: string) => {\r\n  const reg = /([^]*?[\\n\\r])/g\r\n  const textArray = []\r\n  while (true) {\r\n    let arr = reg.exec(text)\r\n    if (arr) {\r\n      textArray.push(arr[0])\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n  return textArray\r\n}","import React from 'react'\r\nimport {FiBookOpen, FiHeart, FiShare2} from \"react-icons/fi\"\r\nimport './interest.scss'\r\n\r\nconst interest = () => {\r\n  const classPrefix = 'interest'\r\n  return (\r\n    <div className={classPrefix}>\r\n      <div className={`${classPrefix}__item`}>\r\n        <span className={`${classPrefix}__icon`}><FiHeart/></span>\r\n        <span>喜欢</span>\r\n      </div>\r\n      <div className={`${classPrefix}__item`}>\r\n        <span className={`${classPrefix}__icon`}><FiShare2/></span>\r\n        <span>分享</span>\r\n      </div>\r\n      <div className={`${classPrefix}__item`}>\r\n        <span className={`${classPrefix}__icon`}><FiBookOpen/></span>\r\n        <span>在看</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default interest","enum ActionTypes {\r\n  CHANGE_VALUE = 'SEARCH/CHANGE_VALUE',\r\n  CHANGE_HISTORY_SEARCH = 'SEARCH/CHANGE_HISTORY_SEARCH',\r\n  CHANGE_NOW_SEARCH = 'SEARCH/CHANGE_NOW_SEARCH',\r\n  FETCH_STARTED = 'SEARCH/FETCH_STARTE',\r\n  FETCH_SUCCESS='SEARCH/FETCH_SUCCESS',\r\n  FETCH_FAILURE = 'SEARCH/FETCH_FAILURE'\r\n}\r\nexport default ActionTypes\r\n","import {TypedUseSelectorHook, useSelector as useReduxSelector} from \"react-redux\"\r\nimport {RootState} from \"../redux/configureStore\"\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = useReduxSelector","import fetchJsonp from \"fetch-jsonp\"\r\n\r\ninterface Option {\r\n  field?: string\r\n  start?: string\r\n  count?: string\r\n}\r\n\r\nexport const apikey = '0df993c66c0c636e29ecbb5344252a4a'\r\nconst baseApiUrl = 'https://api.douban.com/v2/book'\r\n\r\nconst getSearchApi = (value?: string, tag?: string, field?: string, start?: string, count?: string) => {\r\n  const valueStr = `${value ? '&q=' + value : ''}`\r\n  const tagStr = `${tag ? '&tag=' + tag : ''}`\r\n  const fieldStr = `${field ? '&field=' + field : ''}`\r\n  const startStr = `${start ? '&start=' + start : ''}`\r\n  const countStr = `${count ? '&count=' + count : ''}`\r\n  return `${baseApiUrl}/search?apikey=${apikey}${valueStr}${tagStr}${fieldStr}${startStr}${countStr}`\r\n}\r\nconst getIsbnQueryApi = (isbn: string) => {\r\n  return `${baseApiUrl}/isbn/${isbn}?apikey=${apikey}`\r\n}\r\n\r\nexport const searchValueFetch = async (value: string, option: Option) => {\r\n  const {field, start, count = '10'} = option\r\n  const url = getSearchApi(value, undefined, field, start, count)\r\n  return await fetchJsonp(url).then((res) => res.json())\r\n}\r\n\r\nexport const searchTagFetch = async (tag: string, option: Option) => {\r\n  const {field, start, count = '10'} = option\r\n  const url = getSearchApi(undefined, tag, field, start, count)\r\n  return await fetchJsonp(url).then((res) => res.json())\r\n}\r\nexport const queryisbnFetch = async (isbn: string) => {\r\n  return await fetchJsonp(getIsbnQueryApi(isbn)).then((res) => res.json())\r\n}\r\n","import {ActionTypes} from \"./actionTypes\"\r\nimport {queryisbnFetch} from \"../../../api/service\"\r\n\r\nexport const getBoosInfo = (isbn: string) => {\r\n  return (dispatch: any) => {\r\n    dispatch(fetchStarted())\r\n    queryisbnFetch(isbn)\r\n      .then(data => {\r\n        dispatch(fetchSuccess(data))\r\n      })\r\n      .catch(err => {\r\n        dispatch(fetchFailure(err))\r\n      })\r\n  }\r\n}\r\n\r\nconst fetchStarted = () => ({\r\n  type: ActionTypes.FETCH_STARTED\r\n})\r\n\r\nconst fetchSuccess = (result: any) => ({\r\n  type: ActionTypes.FETCH_SUCCESS,\r\n  result\r\n})\r\n///TODO暂不做处理\r\nconst fetchFailure = (error: any) => ({\r\n  type: ActionTypes.FETCH_FAILURE,\r\n  error\r\n})\r\n","import Details from \"./view/Details\"\r\n\r\nexport {default as detailsReducer } from './redux/reducer'\r\nexport default Details","import React from 'react'\r\nimport {FiArrowLeft} from \"react-icons/fi\"\r\nimport {Dividers, IconWrap, NavBar} from \"../../../baseUI\"\r\nimport {Interest, Summary} from \"../components\"\r\nimport {Status} from \"../redux/reducer\"\r\nimport {useDetailsState} from \"./hook\"\r\nimport './details.scss'\r\n\r\nconst Details: React.FC = (props: any) => {\r\n  const classPrefix = 'details'\r\n  const {isbn} = props.match.params\r\n  const {state, setDetailsState} = useDetailsState(isbn)\r\n  // @ts-ignore\r\n  const {status, result} = state\r\n  if (state.status === Status.LOADING) return null\r\n  if (state.status === Status.FAILURE) return null\r\n  return (\r\n    <div className=\"details\">\r\n      <div style={{height: '56px'}}>\r\n\t\t\t<NavBar leftContent={<IconWrap icon={<FiArrowLeft/>} style={{marginLeft: '-12px'}}/>}\r\n\t\t\t\t\t\t\tleftOnClick={()=>props.history.goBack()} />\r\n      </div>\r\n      {/*书籍信息*/}\r\n      <div className={`${classPrefix}__info`}>\r\n        <div className={`${classPrefix}__img-wrap`}>\r\n          <img className={`${classPrefix}__img`}\r\n               src={result.image}\r\n               alt={result.alt}/>\r\n        </div>\r\n        <div className={`${classPrefix}__description`}>\r\n          <h2 className={`${classPrefix}__title`}>{result.title}</h2>\r\n          <span className={`${classPrefix}__author`}>作者：{result.author}</span>\r\n          <span className={`${classPrefix}__author-intro`}> {result.author_intro}</span>\r\n        </div>\r\n      </div>\r\n      <Dividers/>\r\n      {/*操作/interest*/}\r\n      <Interest />\r\n      <Dividers/>\r\n      {/*内容简介*/}\r\n      <Summary data={result.summary}/>\r\n      {/*查看目录TODO*/}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Details","import {useSelector} from \"../../../common/reduxHook\"\r\nimport {shallowEqual, useDispatch} from \"react-redux\"\r\nimport {getBoosInfo} from \"../redux/actions\"\r\nimport {useEffect} from \"react\"\r\n\r\nexport const useDetailsState = (isbn: string) => {\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    dispatch(getBoosInfo(isbn))\r\n  }, [])\r\n  const setDetailsState = (isbn: string) => dispatch(getBoosInfo(isbn))\r\n  const state = useSelector(state => state.details, shallowEqual)\r\n  return {state, setDetailsState}\r\n}\r\n","import ActionTypes from \"./actionTypes\"\r\n\r\nconst initialState = {\r\n  value: '',\r\n  historySearch: new Set<string>(),\r\n  nowSearch: null\r\n}\r\nexport enum Status {\r\n  LOADING,\r\n  SUCCESS,\r\n  FAILURE\r\n}\r\nconst searchReducer = (state = initialState, action: any) => {\r\n  switch (action.type) {\r\n    /*更改*/\r\n    case ActionTypes.CHANGE_VALUE: {\r\n      return {...state, value: action.value}\r\n    }\r\n    case ActionTypes.CHANGE_HISTORY_SEARCH: {\r\n      console.log(action.historySearch)\r\n      return {...state, historySearch: action.historySearch}\r\n    }\r\n    case ActionTypes.CHANGE_NOW_SEARCH: {\r\n      return {...state, nowSearch: action.nowSearch}\r\n    }\r\n    /*搜索页面请求状态*/\r\n    case ActionTypes.FETCH_STARTED: {\r\n      return {...state, status: Status.LOADING}\r\n    }\r\n    case ActionTypes.FETCH_SUCCESS: {\r\n      return {...state, status: Status.SUCCESS}\r\n    }\r\n    case ActionTypes.FETCH_FAILURE: {\r\n      return {...state, status: Status.FAILURE}\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default searchReducer\r\n","export enum ActionTypes {\r\n  CHANGE_NEW_BOOK = 'NEW_BOOK/CHANGE_NEW_BOOK',\r\n  FETCH_STARTED = 'NEW_BOOK/FETCH_STARTE',\r\n  FETCH_SUCCESS='NEW_BOOK/FETCH_SUCCESS',\r\n  FETCH_FAILURE = 'NEW_BOOK/FETCH_FAILURE'\r\n}","import {ActionTypes} from \"./actionTypes\"\r\n\r\nexport enum Status {\r\n  LOADING,\r\n  SUCCESS,\r\n  FAILURE\r\n}\r\nexport default (state = {status: Status.LOADING}, action:any) => {\r\n  switch (action.type) {\r\n    case ActionTypes.CHANGE_NEW_BOOK: {\r\n      return {...state, result: action.nowSearch}\r\n    }\r\n    case ActionTypes.FETCH_STARTED: {\r\n      return {status: Status.LOADING}\r\n    }\r\n    case ActionTypes.FETCH_SUCCESS: {\r\n      return {...state, status: Status.SUCCESS, result: action.result}\r\n    }\r\n    case ActionTypes.FETCH_FAILURE: {\r\n      return {status: Status.FAILURE}\r\n    }\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}","import { combineReducers } from \"redux\";\r\nimport { connectRouter } from 'connected-react-router'\r\nimport {detailsReducer} from \"../containers/details\"\r\nimport searchReducer from \"../containers/search/redux/reducer\"\r\nimport newBookReducer from \"../containers/new_book/redux/reducer\"\r\n\r\n// @ts-ignore\r\n// @ts-ignore\r\nexport default (history:any) => combineReducers({\r\n  router: connectRouter(history),\r\n  search: searchReducer,\r\n  newBook: newBookReducer,\r\n  details: detailsReducer\r\n})\r\n","import { applyMiddleware, compose, createStore } from 'redux'\r\n\r\nimport ReduxThunk from 'redux-thunk'\r\nimport createRootReducer from './reducers'\r\nimport { createBrowserHistory } from 'history'\r\nimport { routerMiddleware } from 'connected-react-router'\r\n\r\nexport const history = createBrowserHistory()\r\n\r\nconst rootReducer = createRootReducer(history)\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n\r\nexport default function configureStore(preloadedState: any) {\r\n  const store = createStore(\r\n    rootReducer,\r\n    preloadedState,\r\n    compose(\r\n      applyMiddleware(\r\n        routerMiddleware(history),\r\n        ReduxThunk\r\n      ),\r\n    ),\r\n  )\r\n  return store\r\n}","import ActionTypes from \"./actionTypes\"\r\nimport {searchValueFetch} from \"../../../api/service\"\r\n\r\nimport {push} from \"connected-react-router\"\r\nvar debounce = require(\"lodash.debounce\")\r\n\r\n/**\r\n * 改变值\r\n */\r\nexport const changeValue = (value: string) => ({\r\n  type: ActionTypes.CHANGE_VALUE,\r\n  value\r\n})\r\nexport const changeNowSearch = (nowSearch: any) => ({\r\n  type: ActionTypes.CHANGE_NOW_SEARCH,\r\n  nowSearch\r\n})\r\nexport const changeHistorySearch = (historySearch: Set<string>) => ({\r\n  type: ActionTypes.CHANGE_HISTORY_SEARCH,\r\n  historySearch\r\n})\r\n\r\n/**\r\n * @function\r\n * @desc 输入 函数\r\n * @param {string} value 搜索值\r\n */\r\nexport const input = (value: string) => {\r\n  return (dispatch: any) => {\r\n    dispatch(changeValue(value))\r\n\r\n    if (value.length === 0) {\r\n      dispatch(push('/search'))\r\n      return\r\n    }\r\n    dispatch(push('/search/q'))\r\n    debounce(() => {\r\n      dispatch(fetchSearchResult(value))\r\n    }, 300)()\r\n  }\r\n}\r\n\r\nexport const fetchSearchResult = (value: string) => {\r\n  return (dispatch: any) => {\r\n    dispatch(fetchStarted())\r\n    searchValueFetch(value, {field: 'title'})\r\n      .then(data => {\r\n        dispatch(fetchSuccess())\r\n        dispatch(changeNowSearch(data))\r\n      })\r\n      .catch(err => {\r\n        dispatch(fetchFailure())\r\n      })\r\n  }\r\n}\r\nexport const fetchMatchSearchResult = (value: string) => {\r\n  return (dispatch: any) => {\r\n    dispatch(fetchStarted())\r\n    searchValueFetch(value, {field: 'title,subtitle,author,rating,pubdate,images,publisher,isbn13,alt'})\r\n      .then(data => {\r\n        dispatch(fetchSuccess())\r\n        dispatch(changeNowSearch(data))\r\n      })\r\n      .catch(err => {\r\n        dispatch(fetchFailure())\r\n      })\r\n  }\r\n}\r\n\r\nexport const clickResultItem = (value: string) => {\r\n  return (dispatch:any) => {\r\n    dispatch(changeValue(value))\r\n    dispatch(addSearchLog(value))\r\n    dispatch(fetchMatchSearchResult(value))\r\n    dispatch(push('/search/match'))\r\n  }\r\n}\r\n\r\nexport const addMatchSearch = (start:string) => {\r\n  return (dispatch: any, getState: any) => {\r\n    const nowSearch = getState()['search'].nowSearch\r\n    const value = getState()['search'].value\r\n    const newNowSearch = JSON.parse(JSON.stringify(nowSearch));\r\n    searchValueFetch(value, {field: 'title,subtitle,author,rating,pubdate,images,publisher,isbn13,alt', start: start})\r\n      .then(data => {\r\n        newNowSearch.count = data.count\r\n        newNowSearch.start = data.start\r\n        newNowSearch.total = data.total\r\n        const temp = newNowSearch.books.concat(data.books)\r\n        newNowSearch.books = temp\r\n        dispatch(changeNowSearch(newNowSearch))\r\n      })\r\n  }\r\n}\r\n//搜索历史操作相关\r\n/**\r\n * @function\r\n * @desc 添加历史\r\n * @param value\r\n */\r\nexport const addSearchLog = (value: string) => {\r\n  return (dispatch: any, getState: any) => {\r\n    const historySearch = getState().search.historySearch\r\n    let newHistorySearch: Set<string> = copySet(historySearch)\r\n    dispatch(changeHistorySearch(newHistorySearch.add(value)))\r\n    dispatch(writeTolocalStorage(newHistorySearch))\r\n  }\r\n}\r\nexport const writeTolocalStorage = (historySearch: any) => {\r\n  return (dispatch: any) => {\r\n    const value = JSON.stringify([...historySearch])\r\n    localStorage.setItem('react-book', value);\r\n  }\r\n}\r\nexport const readFromlocalStorage = () => {\r\n  return (dispatch: any) => {\r\n    let value = localStorage.getItem('react-book');\r\n    let historySearch\r\n    if (value) {\r\n      historySearch = JSON.parse(value)\r\n    }\r\n    dispatch(changeHistorySearch(new Set(historySearch)))\r\n  }\r\n}\r\n\r\nexport const delHistorySearch = () => {\r\n  return (dispatch: any) => {\r\n    dispatch(changeHistorySearch(new Set()))\r\n    localStorage.setItem('react-book', '');\r\n  }\r\n}\r\n\r\n/*\r\n* 网络请求相关\r\n* */\r\nconst fetchStarted = () => ({\r\n  type: ActionTypes.FETCH_STARTED\r\n})\r\n\r\nconst fetchSuccess = () => ({\r\n  type: ActionTypes.FETCH_SUCCESS\r\n})\r\n///TODO暂不做处理\r\nconst fetchFailure = () => ({\r\n  type: ActionTypes.FETCH_FAILURE\r\n})\r\n\r\nconst copySet = (set: Set<string>) => {\r\n  let newSet = new Set<string>()\r\n  set.forEach(item => newSet.add(item))\r\n  return newSet\r\n}","import { useDispatch, shallowEqual } from \"react-redux\";\r\nimport { useSelector } from \"../../../common/reduxHook\"\r\nimport {\r\n  addMatchSearch,\r\n  changeHistorySearch,\r\n  clickResultItem,\r\n  delHistorySearch,\r\n  input,\r\n  readFromlocalStorage\r\n} from \"../redux/actions\"\r\n\r\nexport const useSearchValue = () => {\r\n  const dispatch = useDispatch()\r\n  const onChange = (value: string) => dispatch(input(value))\r\n  const value = useSelector(state => state.search.value, shallowEqual)\r\n\r\n  return {value, onChange}\r\n}\r\nexport const useNowSearch = () => {\r\n  const nowSearch = useSelector(state => state.search.nowSearch, shallowEqual)\r\n  return {nowSearch}\r\n}\r\nexport const usePagingMatchSearch = () => {\r\n  const dispatch = useDispatch()\r\n  const pagingSearch = (start: string) => dispatch(addMatchSearch(start))\r\n  return [pagingSearch]\r\n}\r\nexport const useCLICKResult = () => {\r\n  const dispatch = useDispatch()\r\n  const clickResultAction = (value: string) => dispatch(clickResultItem(value))\r\n  return {clickResultAction}\r\n}\r\nexport const useHistorySearch = () => {\r\n  const dispatch = useDispatch()\r\n  const loading = () => dispatch(readFromlocalStorage())\r\n  const delHistory = () => dispatch(delHistorySearch())\r\n  const historySearch = useSelector(state => state.search.historySearch)\r\n  return {loading, delHistory, historySearch}\r\n}","import React, {useEffect} from 'react'\r\nimport {FiTrash2} from \"react-icons/fi\"\r\n\r\nimport {Header,IconWrap,Tag} from \"../../../../baseUI\"\r\n\r\nimport {useCLICKResult, useHistorySearch} from \"../../view/hook\"\r\nimport './search_history.scss'\r\n\r\nconst SearchHistory: React.FC = () => {\r\n  const {loading, delHistory,historySearch} = useHistorySearch()\r\n  const {clickResultAction} = useCLICKResult()\r\n  useEffect(() => {\r\n    loading()\r\n  },[])\r\n  const classPrefix = 'search-history'\r\n  const getTags = () => {\r\n    let arr: Array<JSX.Element> = []\r\n    historySearch.forEach((item:any) => {\r\n      arr.push(<Tag key={'tag' + item}\r\n                    metaData={item} onClick={clickResultAction}>{ item }</Tag>)\r\n    })\r\n    return arr\r\n  }\r\n  const getReturn = () => (\r\n    <div className={classPrefix}>\r\n      <Header title='历史搜索'\r\n              extra={<IconWrap icon={<FiTrash2/>} />} onClick={delHistory}\r\n      />\r\n      <div>\r\n        {getTags()}\r\n      </div>\r\n    </div>\r\n  )\r\n  return historySearch.size === 0\r\n    ? null\r\n    : getReturn()\r\n}\r\n\r\nSearchHistory.propTypes = {\r\n\r\n}\r\n\r\nexport default SearchHistory","import React, { useRef } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { FiArrowLeft, FiX } from 'react-icons/fi'\r\n\r\n\r\nimport { useSearchValue } from \"../../view/hook\"\r\nimport './search_bar.scss'\r\nimport {IconWrap} from \"../../../../baseUI\"\r\n\r\nconst SearchBar: React.FC<any> = (props:any) => {\r\n  const {value, onChange} = useSearchValue()\r\n  const inputEl = useRef<HTMLInputElement>(null)\r\n  const handleRemove = () => {\r\n    onChange('')\r\n    const node = inputEl.current\r\n    if (node) {\r\n      node.focus()\r\n    }\r\n  }\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    onChange(e.target.value)\r\n  }\r\n  const classPrefix = \"search-bar\"\r\n  return (\r\n    <div className={`${classPrefix}`}>\r\n      <Link className={`${classPrefix}__left`} to=\"/home\">\r\n        <IconWrap icon={<FiArrowLeft/>} />\r\n      </Link>\r\n      <input className={`${classPrefix}__input`}\r\n             onChange={handleChange}\r\n             ref={inputEl}\r\n             type=\"text\"\r\n             value={value}\r\n             placeholder=\"搜索\"\r\n      />\r\n      {value ? (\r\n        <IconWrap className={`${classPrefix}__x`}\r\n               icon={<FiX/>}\r\n               onClick={handleRemove}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchBar\r\n","import React from 'react'\r\nimport {List,ListItem} from \"../../../../baseUI\"\r\nimport {useCLICKResult, useNowSearch} from \"../../view/hook\"\r\n\r\nimport './search_list.scss'\r\n\r\nconst SearchList = (props: any) => {\r\n  const { nowSearch } = useNowSearch()\r\n  const {clickResultAction} = useCLICKResult()\r\n  \r\n  if (nowSearch === null) return null\r\n  const classPrefix = 'search-list'\r\n  return (\r\n    <div>\r\n      <List dataSource={nowSearch.books} renderItem={((item) => (\r\n        <ListItem onClick={clickResultAction} metaData={item.title} key={item.isbn13}>\r\n          <div className={`${classPrefix}__item`}>{item.title}</div>\r\n        </ListItem>\r\n      ))}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchList","import React, {useEffect} from 'react'\r\n\r\nimport {DetailsList} from \"../../../../baseUI\"\r\nimport {useNowSearch, usePagingMatchSearch} from \"../../view/hook\"\r\n\r\nconst SearchMatch = () => {\r\n  const {nowSearch} = useNowSearch()\r\n  const [pagingSearch] = usePagingMatchSearch()\r\n  console.log(nowSearch)\r\n  if (nowSearch === null) return null\r\n  const load = (start: string) => {\r\n    pagingSearch(start)\r\n  }\r\n  return (\r\n    <div>\r\n      <DetailsList dataSource={nowSearch} loadCallBack={load}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchMatch","import React from 'react'\r\nimport { Switch, Route } from 'react-router';\r\nimport {SearchBar, SearchHistory, SearchList, SearchMatch} from \"../components\"\r\n\r\nconst Search: React.FC = (props:any) => {\r\n  return (\r\n    <div>\r\n      <SearchBar />\r\n      <Switch>\r\n        <Route exact path='/search/' component={SearchHistory} />\r\n        <Route exact path='/search/q' component={SearchList} />\r\n        <Route exact path='/search/match' component={SearchMatch}/>\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search","import {searchTagFetch} from \"../../../api/service\"\r\nimport {ActionTypes} from \"./actionTypes\"\r\n\r\n\r\nexport const fetchNewBookData = () => {\r\n  return (dispatch: any) => {\r\n    dispatch(fetchStarted())\r\n    searchTagFetch('2019', {field: 'title,subtitle,author,rating,pubdate,images,publisher,isbn13,alt'})\r\n      .then(data => {\r\n        dispatch(fetchSuccess(data))\r\n      })\r\n      .catch(err => {\r\n        dispatch(fetchFailure(err))\r\n      })\r\n  }\r\n}\r\nexport const fetchPagingNewBookData = (start: string) => {\r\n  console.log(start)\r\n  return (dispatch: any, getState: any) => {\r\n    const newBook = getState()['newBook'].result\r\n    const newNewBook = JSON.parse(JSON.stringify(newBook));\r\n    searchTagFetch('2019', {field: 'title,subtitle,author,rating,pubdate,images,publisher,isbn13,alt', start: start})\r\n      .then(data => {\r\n        newNewBook.count = data.count\r\n        newNewBook.start = data.start\r\n        newNewBook.total = data.total\r\n        const temp = newNewBook.books.concat(data.books)\r\n        newNewBook.books = temp\r\n        dispatch(changeNewBook(newNewBook))\r\n      })\r\n  }\r\n}\r\nconst changeNewBook = (nowSearch: any) => ({\r\n  type: ActionTypes.CHANGE_NEW_BOOK,\r\n  nowSearch\r\n})\r\nconst fetchStarted = () => ({\r\n  type: ActionTypes.FETCH_STARTED\r\n})\r\n\r\nconst fetchSuccess = (result: any) => ({\r\n  type: ActionTypes.FETCH_SUCCESS,\r\n  result\r\n})\r\n///TODO暂不做处理\r\nconst fetchFailure = (error: any) => ({\r\n  type: ActionTypes.FETCH_FAILURE,\r\n  error\r\n})\r\n","import {useEffect} from \"react\"\r\nimport {shallowEqual, useDispatch} from \"react-redux\"\r\nimport {useSelector} from \"../../../common/reduxHook\"\r\nimport {fetchNewBookData, fetchPagingNewBookData} from \"../redux/actions\"\r\n\r\nexport const useNewBook = () => {\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    console.log(2333)\r\n    dispatch(fetchNewBookData())\r\n  }, [dispatch])\r\n  const loadNewBookData = (start: string) => dispatch(fetchNewBookData())\r\n  const newBook: any = useSelector(state => state.newBook, shallowEqual)\r\n\r\n  return [newBook, loadNewBookData]\r\n}\r\nexport const usePagingNewBook = () => {\r\n  const dispatch = useDispatch()\r\n  const loadNewBookData = (start: string) => dispatch(fetchPagingNewBookData(start))\r\n  const newBook: any = useSelector(state => state.newBook, shallowEqual)\r\n  return [newBook, loadNewBookData]\r\n}","import All from \"./view/All\"\r\n\r\nexport default All","import React from 'react'\r\nimport {FiArrowLeft} from \"react-icons/fi\"\r\nimport {DetailsList, IconWrap, NavBar} from \"../../../baseUI\"\r\nimport {usePagingNewBook} from \"../../new_book/view/hook\"\r\n\r\nconst All = (props: any) => {\r\n  const {match} = props\r\n  const type = match.params.type\r\n  const [newBook, loadNewBookData] = usePagingNewBook()\r\n  let tempState\r\n  switch (type) {\r\n    case 'newBook':\r\n      tempState = newBook.result\r\n  }\r\n  const load = (start: any) => {\r\n    loadNewBookData(start)\r\n  }\r\n  return (\r\n    <div>\r\n      <div style={{height: '56px'}}>\r\n        <NavBar leftContent={<IconWrap icon={<FiArrowLeft/>} style={{marginLeft: '-12px'}}/>}\r\n                leftOnClick={()=>props.history.goBack()}\r\n        />\r\n      </div>\r\n      <DetailsList dataSource={tempState} loadCallBack={load}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default All","import NewBook from \"./view/NewBook\"\r\n\r\nexport default NewBook","import React from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {Express} from \"../../../baseUI\"\r\n\r\nimport {apikey} from \"../../../api/service\"\r\nimport {useNewBook} from \"./hook\"\r\nimport './new_book.scss'\r\nimport {Status} from \"../redux/reducer\"\r\n\r\nconst NewBook: React.FC = () => {\r\n  const [newBook] = useNewBook()\r\n  const {status, result} = newBook\r\n  const classPrefix = 'new-book'\r\n  console.log(newBook)\r\n  if (status === Status.LOADING ) return null\r\n  return (\r\n    <div className={classPrefix}>\r\n      {status === Status.SUCCESS ? (\r\n        <Express to='/all/newBook'\r\n                 data={result.books}\r\n                 title='新书速递'\r\n                 renderItem={(item:any, i:any) => (\r\n\t\t\t\t\t\t\t\t\t <Link className={`${classPrefix}__item`}\r\n                         to={`/details/${item.isbn13}`}\r\n                         key={item.isbn13 + i + 'nb'}>\r\n\t\t\t\t\t\t\t\t\t\t <div className={`${classPrefix}__img-wrap`}>\r\n\t\t\t\t\t\t\t\t\t\t\t <img className={`${classPrefix}__img`} src={`${item.image}?apikey=${apikey}`}/>\r\n\t\t\t\t\t\t\t\t\t\t </div>\r\n\t\t\t\t\t\t\t\t\t\t <h3 className={`${classPrefix}__title`}>{item.title}</h3>\r\n\t\t\t\t\t\t\t\t\t\t <span className={`${classPrefix}__author`}>{item.author}</span>\r\n\t\t\t\t\t\t\t\t\t </Link>\r\n                 )}\r\n        />\r\n      ) : <div>网络错误</div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewBook","import React from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {FiMenu, FiSearch} from \"react-icons/fi\"\r\nimport {NavBar, IconWrap} from \"../../baseUI\"\r\nimport {toast, ToastContainer} from \"react-toastify\"\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nconst HomeBar: React.FC = () => {\r\n  return (\r\n    <div style={{height: '56px'}}>\r\n      <NavBar leftContent={<IconWrap icon={<FiMenu/>} style={{marginLeft: '-12px'}}/>}\r\n              leftOnClick={()=>toast(\"此功能开发中\")}\r\n              rightContent={\r\n                <Link to=\"/search\">\r\n                  <IconWrap icon={<FiSearch/>} style={{marginRight: '-12px'}}/>\r\n                </Link>}\r\n      >\r\n\r\n      </NavBar>\r\n      <ToastContainer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomeBar","import React from 'react'\r\n\r\nimport NewBook from \"../containers/new_book\"\r\nimport HomeBar from \"../containers/home_bar/HomeBar\"\r\n\r\nconst Home: React.FC = () => {\r\n  return (\r\n    <>\r\n      <HomeBar/>\r\n      <NewBook />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Find = () => {\r\n  return (\r\n    <div style={{display:'flex',justifyContent:'center',alignItems:'center'}}>\r\n      新功能开发中，期待上线\r\n    </div>\r\n  )\r\n}\r\n\r\nFind.propTypes = {\r\n\r\n}\r\n\r\nexport default Find","import React from 'react'\r\n\r\nconst Shlef = () => {\r\n  return (\r\n    <div style={{display:'flex',justifyContent:'center',alignItems:'center'}}>\r\n      新功能开发中，期待上线\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Shlef","import React from 'react';\nimport Tabs from \"./baseUI/tabs/Tabs\"\nimport TabPane from \"./baseUI/tabs/TabPane\"\nimport {FiBook, FiGlobe, FiHome} from \"react-icons/fi\"\nimport {Route, Switch,Redirect} from \"react-router-dom\"\nimport Details from \"./containers/details\"\nimport Search from \"./containers/search/view/Search\"\nimport All from \"./containers/all\"\nimport Home from \"./view/Home\"\nimport Find from \"./view/Find\"\nimport Shlef from \"./view/Shlef\"\nimport './App.css'\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <Redirect from=\"/\" to=\"/home\" />\n      <Switch>\n        <Route path=\"/all/:type\" component={All} />\n        <Route path=\"/details/:isbn\" component={Details} />\n        <Route path=\"/search\" component={Search} />\n        <Route path=\"/\" render={routeProps => (\n          <Tabs>\n            <TabPane path={'/home'} component={Home} tab={IndexTab} />\n            <TabPane path={'/find'} component={Find} tab={FinedTab}/>\n            <TabPane path={'/shelf'} component={Shlef} tab={ShelfTab} />\n          </Tabs>\n        )} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\nconst IndexTab = () => (\n  <>\n    <span className=\"m-tabs__icon\"><FiHome /></span>\n    <span className=\"m-tabs__title\">首页</span>\n  </>\n)\nconst FinedTab = () => (\n  <>\n    <span className=\"m-tabs__icon\"><FiGlobe /></span>\n    <span className=\"m-tabs__title\">探索</span>\n  </>\n)\nconst ShelfTab = () => (\n  <>\n    <span className=\"m-tabs__icon\"><FiBook /></span>\n    <span className=\"m-tabs__title\">书架</span>\n  </>\n)","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {BrowserRouter} from \"react-router-dom\"\nimport {Provider} from \"react-redux\"\nimport configureStore, {history} from \"./redux/configureStore\"\nimport App from './App'\nimport { ConnectedRouter } from 'connected-react-router';\n\nconst store = configureStore(undefined)\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App/>\n    </ConnectedRouter>\n  </Provider>\n  , document.getElementById('root'))\n"],"sourceRoot":""}